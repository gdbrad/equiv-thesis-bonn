% !TEX root = mythesis.tex
%==============================================================================
\chapter{Computational Considerations}
\label{sec:comp}
%==============================================================================
The amount of compute time for generating the eigenbasis, and subsequently the perambulators and meson elementals, scales with the spatial extent of the lattice $N$ and the rank of the distillation basis $n$. We provide an overview of our lattice setup and a summary of the Hybrid Monte Carlo method for generating gauge configurations. Next, we present the software stack and pipeline for our calculations on the Jureca cluster, including the storage and runtime cost associated with each object necessary for performing hadron spectroscopy with distillation. As this framework hinges upon algebraic mulitigrid methods, we touch on the key points and how this technology interfaces with \texttt{Chroma} lattice objects. At the final stage, matrix elements(meson elementals) and perambulators are contracted together with some appropiate Dirac strucutre depending on the flavor and isospin channel (the $J^{PC}$ continuum quantum numbers to be accessed), which we elucidate diagramatically. The details of our 6-stout smeared ensembles are given for completion. Having a wide range of pion masses and lattice spacings to study will allow us to probe the quark mass dependence of the exotic doubly charmed tetraquark state $T_{cc}^+$.   

\section{Lattice Setup}
The only known \textit{ab-initio} approach to probing the low energy regime of QCD is with High Performance Computing(HPC) and the discretized lattice from . At bottom, a path-integral approach is used to compute some observable $\mathcal{O}$ with a predefined collection of bare physics and lattice parameters$\{\beta,am_{ud},am_s\}$. From \todo{fix crossref to spec}, we know the lattice path integral is:
\begin{align}
  Z = \int [DU] \text{exp}\left[-S[U]\right] \quad \text{where} \quad  DU = \prod_{x,\mu}^{} dU_{\mu x}
\end{align} where one can add in the dependence on the bare physics and lattice parameters like so: 
\begin{equation}
  \bra{}\mathcal{O}\ket{} = \frac{1}{Z} \int \mathcal{D}[U] \mathcal{O}(U) \cdot p(U)
\end{equation} where $p(U)$ is built from the discretized Dirac operator and pure gauge action and the integral measure is $\mathcal{D}[U] = \prod_{x=0,\mu=1}^{d,V} dH(U_\mu(x))$ where $V$ is the volume of the lattice in $d=4$ dimensions (the lattice is a hypercube, a 4D object) and the Haar measure $dH$, which allows the lattice path integral to retain gauge invariance. The data in this problem spaces is contained in the lattice sites. 

In  we showed how the discretization of the euclidean path integral reduces the infinite number of integrals to something more manageable. However, the number of lattice sites on a typical lattice is $\approx32^4$, so a ``brute-force'' approach is not feasible. See \cite{Montvay_MÃ¼nster_1994}, \cite{Luscher:2010ae},\cite{Creutz:1988wv} \cite{Finkenrath:2023sjg} for more details. To make the problem tractable, we turn to Markov Chain Monte Carlo simulations to calculate the expectation value and correlation functions of observables 
\begin{equation}
  \left<\mathcal{O}\right> = \frac{1}{N} \sum_{q,\bar{q},U}^{} \mathcal{O}\left[q,\bar{q},U\right] 
\end{equation} where $\left[q,\bar{q},U\right] \approx \text{exp}(-S[q,\bar{q},U])$. The latter is the probability weight that we use to perform importance sampling of the gauge field configurations. This is necessary because only a small vicinity of the minimum of the spectral density will contribute. Moreover, The Boltzmann factor $\text{exp}(-S[\phi])$ dictates the distribution of configurations in the sample produced by the Monte Carlo integration. This process is comprised of two steps \cite{Luscher:2010ae}: 
\begin{itemize}
  \item Proposal: a new gauge configuration $U'$ is generated with some weight $q(U)$ with probability $T(U \to U')$ 
  \item Correction or Updating: $P_{accept}(U,U') = min \left[1,\frac{p(U')q(U)}{p(U)q(U')}\right]$
\end{itemize} 
Assuming that the above ratio follows a log-normal distribution then the acceptance rate is $\texttt{erfc}\left(\sqrt{\sigma^2/8}\right)$ where erfc is the complementary error function. The collection of configurations $U_i$ with associated weight $p(U)$ make up the ensemble. 


\section{Software Stack for Distillation}
Distillation is costly initially both in storage and component construction. This pays off at the end of the day as we can reuse the perambulators for subsequent calculations; The inversions can be precomputed and stored on disk. For the di-meson system we are investigating, the contraction cost is not the dominant contribution. We will use the MultiGrid (MG) solver from \texttt{QUDA}, \texttt{Chroma} with \texttt{Superbblas} support, the \texttt{PRIMME} eigensolver, and \texttt{Numpy Einsum} for contractions. The amount of computation and storage scales with the lattice size $N$ and the rank of the distillation basis, $n$. The optimal rank of the distillation basis is determined experimentally, but it is proportional to the spatial volume of the lattice. All of the high-peformance computing tasks below were performed on the Jureca cluster at the Juelich Supercomputing Centre. 
\section{Pipeline}
In order to perform spectroscopy calculations for a given ensemble, there exists a sequential dependency chain for HPC calculations:
\begin{itemize}
     \setlength\itemsep{1em}
        \item[\checkmark] \textbf{Ensemble generation:} $N_f = 2+1$ quark flavors, a tree level Symanzik improved gluon action and 6-stout dynamical smeared Wilson fermions
        \item[\checkmark] \textbf{HPC Tasks:} Generation of distillation basis, perambulators, meson elementals using \texttt{Chroma} with \texttt{superbblas} support on the Jureca cluster at JSC
        \item Construct \textbf{Di-meson distilled operators} using Hadspec method of subduction coefficents and helicity operators
        \item[\checkmark] Perform \textbf{contractions} of multi-hadron operators $\to$ 2pt correlators
        \item Construct correlation function coming from the \textbf{GEVP} in the right irreducible representation
    \end{itemize}
\begin{figure}[!htbp]
    \begin{center}
      \scalebox{1.0}{
        \begin{tikzpicture}[node distance=1.5cm and 3cm] % Adjusted node distance
            \tikzstyle{startstop} = [rectangle, rounded corners, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=red!30]
            \tikzstyle{io} = [trapezium, trapezium left angle=70, trapezium right angle=110, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=blue!30]
            \tikzstyle{process} = [rectangle, minimum width=3.5cm, minimum height=1cm, text centered, text width=3cm, draw=black, fill=orange!30]
            \tikzstyle{arrow} = [thick,->,>=stealth]

            % Nodes
            \node (start) [startstop] {Input File Generation: XML and SLURM Batch Scripts};
            \node (in1) [io, below of=start] {Calculate Distillation Basis/Eigenpairs (GPU)};
            
            % Parallel processes
            \node (pro1) [process, below of= in1, xshift=-3cm, yshift=-1cm] {Meson Elementals};
            \node (pro2) [process, below of= in1, xshift=3cm, yshift=-1cm] {Perambulators};
            
            % H5 Conversion processes
            \node (h5conv1) [process, below of=pro1] {H5 Conversion};
            \node (h5conv2) [process, below of=pro2] {H5 Conversion};
            
            % Contracting
            \node (contract) [process, below of=h5conv1, xshift=3cm] {Contract Elementals and Perambulators};
            
            % Output
            \node (out1) [io, below of=contract] {Output the Two-Point Correlator};
            \node (stop) [startstop, below of=out1] {H5 output ($N_t \times N_{cfg}$)};

            % Arrows
            \draw [arrow] (start) -- (in1);
            \draw [arrow] (in1) -- (pro1);
            \draw [arrow] (in1) -- (pro2);
            \draw [arrow] (pro1) -- (h5conv1);
            \draw [arrow] (pro2) -- (h5conv2);
            \draw [arrow] (h5conv1) -- (contract);
            \draw [arrow] (h5conv2) -- (contract);
            \draw [arrow] (contract) -- (out1);
            \draw [arrow] (out1) -- (stop);
        \end{tikzpicture}
      }
    \end{center}
    \caption{Flowchart of the computational workflow for computing lattice objects with distillation.}
    \label{fig:alg_flow}
\end{figure}
\section{Algebraic Multigrid Methods in LQCD}
Computing fundamental building blocks on the lattice, which will each be discussed in the proceeding sections, requires sophisticated hardware architecure. We use the \verb|Chroma| software stack from USQCD \cite{Edwards_2005} compiled with \verb|superbblas| support (required for computing the distilled objects of interest), and the multigrid solver from \verb|QUDA|. We run the HPC tasks on a single GPU node, as we found multi-node jobs are not compatible with our stack and the Jureca cluster at JSC. This stack ultimately allows us to calculate a large class of matrix elements at high precision \cite{romero_efficient_2020} using distillation. 

Before we dive into the details of the calculation of our distilled objects, it is useful to show how lattice objects in \texttt{Chroma} transform under different spaces with a tensor product structre \cite{Edwards_2005}. 
\begin{table}
\begin{displaymath}
  \begin{array}{llcccccl}
                    & {\textit Lattice} &    &  {\textit Color} &     & {\textit Spin}  &     & {\textit Complexity}\\
  {Gauge\ fields:}& {\texttt Lattice} &\otimes& {\texttt Matrix(Nc)}&\otimes& {\texttt Scalar}    &\otimes& {\texttt Complex}\\
  {Fermions:}    & {\texttt Lattice} &\otimes& {\texttt Vector(Nc)}&\otimes& {\texttt Vector(Ns)}&\otimes& {\texttt Complex}\\
  {Scalars:}     & {\texttt Scalar}  &\otimes& {\texttt Scalar}    &\otimes& {\texttt Scalar}    &\otimes& {\texttt Scalar} \\
  {Propagators:} & {\texttt Lattice} &\otimes& {\texttt Matrix(Nc)}&\otimes& {\texttt Matrix(Ns)}&\otimes& {\texttt Complex}\\
  {Gamma:}       & {\texttt Scalar}  &\otimes& {\texttt Scalar}    &\otimes& {\texttt Matrix(Ns)}&\otimes& {\texttt Complex}\\
  \end{array}
  \end{displaymath}
  \caption{The tensor structure of \texttt{Chroma} objects.}
    \label{fig:chroma}
\end{table}

  
  \verb|Nd| is the number of space-time dimensions\\
  \verb|Nc| is the dimension of the color vector space\\
  \verb|Ns| is the dimension of the spin vector space\\
  
  Gauge fields can left-multiply fermions via color matrix times color
  vector but is diagonal in spin space (spin scalar times spin vector).
  A gamma matrix can right-multiply a propagator (spin matrix times
  spin matrix) but is diagonal in color space (color matrix times color
  scalar). Say we have two lattice fermion fields \texttt{A, B}, a lattice color matrix, or gauge field \texttt{U}. At each lattice site, \texttt{U} is a scalar in spin space. The product 
  \begin{equation}
    B_\alpha^i (x) = U^{ij}(x) \times A_\alpha^j(x)
  \end{equation} for lattice coordinates x, $i,j$ are the color indices, $\alpha$ is the spin index. The tensor multiiplication is over complex types, from which we will extract the real component at the stage of forming two point hadron correlators.  

  
\subsection{Eigenpairs/Distillation Basis Calculation}
Sparse linear algebra is necessary to construct the smeared quark fields based on distillation, where the
eigenvectors with smallest eigenvalues of the gauge-covariant Laplace operator $\nabla^2[t]$. 
This is the first step in the calculation which is input data for the generation of elementals and perambulators. We use the \verb|Primme| eigensolver to obtain the eigenpairs(eigenvalues,eigenvectors) of the Hermitian Wilson-Dirac operator\cite{PRIMME}\cite{Frommer:2020ovr}. 
the eigenbasis in distillation space contains the eigencvectors from the lowest-lying regime of the spectrum of the hermitian negative-definite Laplacian-like operator 
\begin{equation}
  \nabla^{2(\vec{x},\vec{y})} = 6\delta_{\vec{x},\vec{y}} - \sum_{\vec{j}\in|(1,0,0),(0,10),(0,0,1)|}^{} U_{\vec{j}}^{(x)}\delta_{\vec{x}+\vec{j},\vec{y}} + U_{\vec{j}}^{(\vec{x}-\vec{j})^\dagger}\delta_{\vec{x}-\vec{j},\vec{y}}
\end{equation}
where the gauge fields $U$ are stout smeared. 
Distillation smearing projects into the $N_D$ dimensional vector space \ref{eq:eigs} like so 
\begin{equation}
  \Box_{ab}(x_1,x_2,t) = V(x_1,t)^{d}_a V^{\dagger} (x_2,t)^{d}_b
\end{equation} where $a,b$ are the color indices and $d = 1 \dots N_D$ is the distillation space index \cite{10.5555/3029317}. This is the eigenbasis in distillation space, which now allows us to access elements of the quark propagator.  

\subsection{Inversion of the Dirac Matrix}
WE use the Multigrid clover inverter from \texttt{QUDA}. 
The Dirac equation 
\begin{align}
  \mathcal{D}\psi + m \cdot \psi = \eta
\end{align}


\subsection{Meson Elementals Calculation}
The calculation of our elemental building blocks requires tensor contractions. These matrix-matrix multiplcations are accelerated with the \texttt{Superbblas} library \cite{dinapoli2013efficientuseblaslibrary}. These objects are calculated for every time-slice, on every gauge configuration, and with every combination of displacements. If we disregard the perambulators for a moment, the correlation functions are described by the correlation between meson elementals at the different time-slices.  From \todo{cite spec} we express the distilled meson elemental as 
\begin{equation}
\Phi^A_{\alpha\beta}(t) = V^{\dagger}(t) [\Gamma^A(t)]_{\alpha\beta} V(t) \equiv V^{\dagger}(t)\mathcal{D}^A(t)V(t)S^A_{\alpha\beta}
\end{equation} where $\mathcal{D}^A(t)$ is the lattice Dirac matrix and $S^A_{\alpha\beta}$ is the subduction coefficient, which is the identity for $\vec{P^2} = 0$.  
This tensor contraction invovles the following\cite{romero_efficient_2020}: 
\begin{itemize}
  \item Two 5-dimensional tensors (the distillation basis) $v,w$, the coordinates of which are on the \textbf{spatial} extent of the lattice $N_L$
  \subitem three color space components 
  \subitem distillation basis column index 
  \item  4-dimensional tensor $z$ representing a phase $z^{\vec{x},l} = e^{-i\vec{p}\vec{x}}$ which carries a component in $N_L$ and a momentum index
  \item color contraction with the Kronecker delta 
  \subitem \todo{check this }$ M^{i,j,l} = \sum_{\vec{x}\in N_t,\alpha,\beta \in C}^{} \delta^{\alpha\beta} v^{\vec{x},\alpha,i}w^{\vec{x},\beta,j} z^{\vec{x},l} \text{for} \quad 1\leq i,j \leq n, 1\leq l \leq M$ 
\end{itemize}

\todo{insert time to write to disk vs. time to compute from total chroma time and qio time from output files }





\subsection{Perambulators Calculation}

\section{Cost and Storage of Distillation}
      As we highlighted in \todo{cite spec sec}, distillation restricts operators to a small subspace while mainintaing overlap with relevant eigenstates. As the computational cost is directly proportional to the size of matrices one is manipulating, a reduction in the rank of operators slashes the cost of computing the propagation matrix. Once a suitable set of perambulators are computed, we can resue them to correlate a collection of interpolators.

% \cite{romero_efficient_2020}.
      \vspace{1em}
       
       % The product of        %  \texttt{max_tslices_in_contraction} \texttt{max_moms_in_contraction} and \texttt{max_vecs} controls how much memory is used for contractions. Their tuning is more critical when using GPUs. The optimal value is usually the largest values of the parameters that the CPU or device can handle.
        \begin{table}
        \begin{minipage}{16cm}
        \hspace*{2em}\begin{tabular}{ccc}
        Computation    & Operations cost & Memory footprint \\ \hline
        Distillation basis\footnote{Generate colorvector matrix elements}& $N^3Tn^3D$         & $N^3nT$      \\
        Meson elementals\footnote{Contract two matrices $\to$ tensor} & $N^3Tn^3$      & $N^3n + n^3$  \\
        Perambulators\footnote{Projection of the inverse Dirac operator $\to$ square matrices} & $N^3Tn$   & $N^3Tn$            \\
        Contractions\footnote{Contract together matrix elements and perambulators}   & $n^4T$    & $n^{3}T$   
        \end{tabular}
        \end{minipage}
        \caption{computational cost with reference time per gauge configuration and time-slice source to calcualte a two point correlation function. $N$: lattice size, $n$:rank of distillation basis}
      \end{table}

  \section{Contractions}
  We must ``tie" together the perambulators and elementals with some Dirac gamma structure, where we isolate the channel of interest ($J^{PC}$ continuum quantum numbers) with the lattice group representation. For a single meson correlator, \\ 

  \begin{tikzpicture}[node distance=0.1cm]  % Minimal space between nodes
    \node (box1) [draw, fill=blue!20, minimum width=1.5cm, minimum height=1.5cm] {S};
    \node (box2) [draw, fill=red!20, minimum width=1.5cm, minimum height=1.5cm, right=of box1] {$\gamma_5$};
    \node (box3) [draw, fill=blue!20, minimum width=1.5cm, minimum height=1.5cm, right=of box2] {S};
    \node (box4) [draw, fill=red!20, minimum width=1.5cm, minimum height=1.5cm, right=of box3] {$\gamma_5$};
    
    % Draw diagonal slash through box 2
    \draw (box2.north west) -- (box2.south east);
    
    % Draw diagonal slash through box 4
    \draw (box4.north west) -- (box4.south east);
    
    % Draw the "tr" label
    \node at ($(box1.west) + (-0.8,0)$) {\textbf{tr}};
    
    % Draw large brackets around the first and last boxes
    \draw[thick] 
        ($(box1.north west) + (-0.4, 0.2)$) -- ($(box1.south west) + (-0.4, -0.2)$); % left bracket
    \draw[thick] 
        ($(box4.north east) + (0.4, 0.2)$) -- ($(box4.south east) + (0.4, -0.2)$);  % right bracket
  \end{tikzpicture}
  \\ 

\begin{tikzpicture}[node distance=0.06cm]
  
  % Part 2: Sequence of shapes (rectangles and squares), colored and skinnier
  \node (vrect1) [draw, fill=green!20, minimum width=0.3cm, minimum height=2cm, below=1.5cm of box1, anchor=west] {$V$};
  \node (hrect1) [draw, fill=green!20, minimum width=2cm, minimum height=0.5cm, right=of vrect1] {$V^\dagger$};
  \node (square1) [draw, fill=blue!20, minimum width=1.5cm, minimum height=1.5cm, right=of hrect1] {S};
  
  \node (vrect2) [draw, fill=green!20, minimum width=0.3cm, minimum height=2cm, right=of square1] {$V$};
  \node (hrect2) [draw, fill=green!20, minimum width=2cm, minimum height=0.5cm, right=of vrect2] {$V^\dagger$};
  \node (square2) [draw, fill=red!20, minimum width=1.5cm, minimum height=1.5cm, right=of hrect2] {$\gamma_5$};
  
  \node (vrect3) [draw, fill=green!20, minimum width=0.3cm, minimum height=2cm, right=of square2] {$V$};
  \node (hrect3) [draw, fill=green!20, minimum width=2cm, minimum height=0.5cm, right=of vrect3] {$V^\dagger$};
  \node (square3) [draw, fill=blue!20, minimum width=1.5cm, minimum height=1.5cm, right=of hrect3] {S};

  \node (vrect4) [draw, fill=green!20, minimum width=0.3cm, minimum height=2cm, right=of square3] {$V$};
  \node (hrect4) [draw, fill=green!20, minimum width=2cm, minimum height=0.5cm, right=of vrect4] {$V^\dagger$};
  \node (square4) [draw, fill=red!20, minimum width=1.5cm, minimum height=1.5cm, right=of hrect4] {$\gamma_5$};
  % Draw diagonal slash through box 2
  \draw (square2.north west) -- (square2.south east);
    
  % Draw diagonal slash through box 4
  \draw (square4.north west) -- (square4.south east);

  % Draw large brackets around the first and last boxes
  % Draw the "tr" label
  \node at ($(vrect1.west) + (-0.8,0)$) {\textbf{tr}};
  \draw[thick] 
  ($(vrect1.north west) + (-0.4, 0.2)$) -- ($(vrect1.south west) + (-0.4, -0.2)$); % left bracket
  \draw[thick] 
  ($(square4.north east) + (0.2, 0.4)$) -- ($(square4.south east) + (0.2, -0.4)$);  % right bracket
  
\end{tikzpicture}
\\
\begin{tikzpicture}[node distance=0.1cm]  % Minimal space between nodes

  \node (box1) [draw, fill=blue!20, minimum width=0.5cm, minimum height=0.5cm] {$\tau$};
  \node (box2) [draw, fill=red!20, minimum width=0.5cm, minimum height=0.5cm, right=of box1] {$\phi_0$};
  \node (box3) [draw, fill=blue!20, minimum width=0.5cm, minimum height=0.5cm, right=of box2] {$\tau$};
  \node (box4) [draw, fill=red!20, minimum width=0.5cm, minimum height=0.5cm, right=of box3] {$\phi_t$};
  
  \draw (box2.north west) -- (box2.south east);
  
  \draw (box4.north west) -- (box4.south east);
  
  \node at ($(box1.west) + (-0.8,0)$) {= \textbf{tr}};
  
  \draw[thick] 
      ($(box1.north west) + (-0.4, 0.2)$) -- ($(box1.south west) + (-0.4, -0.2)$); % left bracket
  \draw[thick] 
      ($(box4.north east) + (0.4, 0.2)$) -- ($(box4.south east) + (0.4, -0.2)$);  % right bracket
\end{tikzpicture}
\\
\noindent
\textbf{tr} 
\begin{tikzpicture}[baseline={(current bounding box.center)}, node distance=1.0cm]

  % Define smaller boxes without internal labels
  \node (box0) [draw, fill=blue!20, minimum width=0.4cm, minimum height=0.4cm] {};
  \node (box_q0) [draw, fill=red!20, minimum width=0.4cm, minimum height=0.4cm, right=of box0] {};
  \node (box1) [draw, fill=blue!20, minimum width=0.4cm, minimum height=0.4cm, right=of box_q0] {};
  \node (box_q1) [draw, fill=red!20, minimum width=0.4cm, minimum height=0.4cm, right=of box1] {};
  \node (box2) [draw, fill=blue!20, minimum width=0.4cm, minimum height=0.4cm, right=of box_q1] {};
  \node (box_q2) [draw, fill=red!20, minimum width=0.4cm, minimum height=0.4cm, right=of box2] {};
  \node (box3) [draw, fill=blue!20, minimum width=0.4cm, minimum height=0.4cm, right=of box_q2] {};
  \node (box_q3) [draw, fill=red!20, minimum width=0.4cm, minimum height=0.4cm, right=of box3] {};
  
  % Attach the subscript and time labels close to the boxes
  \node at ($(box0.east) + (0.2, 0)$) {\small $_0(0)$};
  \node at ($(box_q0.east) + (0.3, 0)$) {\small $_{q0}$(t$_0$, t$_1$)};
  \node at ($(box1.east) + (0.2, 0)$) {\small $_1$(t$_1$)};
  \node at ($(box_q1.east) + (0.3, 0)$) {\small $_{q1}$(t$_1$, t$_2$)};
  \node at ($(box2.east) + (0.2, 0)$) {\small $_2$(t$_2$)};
  \node at ($(box_q2.east) + (0.3, 0)$) {\small $_{q2}$(t$_2$, t$_3$)};
  \node at ($(box3.east) + (0.2, 0)$) {\small $_3$(t$_3$)};
  \node at ($(box_q3.east) + (0.3, 0)$) {\small $_{q3}$(t$_3$, t$_0$)};
  
  % Draw large brackets around the first and last boxes
  \draw[thick] 
      ($(box0.north west) + (-0.5, 0.2)$) -- ($(box0.south west) + (-0.5, -0.2)$); % left bracket
  \draw[thick] 
      ($(box_q3.north east) + (0.5, 0.2)$) -- ($(box_q3.south east) + (0.5, -0.2)$);  % right bracket

\end{tikzpicture}

where the colored boxes are $4N_V \times 4N_V$ matrices. A contraction must be carrried out for every gauge configuration (we use 200 in this study); On each configuration, every timeslice and time source is accessed ($N_t = 96$,  $\#t_{src} = 24)$ 

\todo{correct this for single node jobs}
\begin{table}[!h]
  \centering \footnotesize
  \hspace*{-0.6cm}
  \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
  \hline
  \multirow{2}{*}{$\beta$}  & \multirow{2}{*}{$m_{ud}$}   & \multirow{2}{*}{$m_{s}$}   & \multirow{2}{*}{$L^3 \times T$}  & \multirow{2}{*}{$N_\mathrm{cnfg}$} & \multicolumn{3}{c|}{Eigenvectors} & \multicolumn{4}{c|}{Perambulators} \\
  & & & & & Time [s] & Nodes & Cost [kch] & Time [s] & Nodes & $N_\mathrm{srcs}$ & Cost [kch] \\
  \hline \hline
  $3.3$    & $-0.1233$  & $-0.057$  & $24^3\times64$  & 500  & 1190 & 1 & 21  & 42  & 2 & 8 & 11  \\ \hline
  $3.7$    & $-0.0200$  & $-0.0$    & $32^3\times96$  & 200  & 4230 & 1 & 30  & 151 & 2 & 8 & 17  \\ 
  $3.7$    & $-0.0220$  & $-0.0$    & $32^3\times96$  & 200  & 4230 & 1 & 30  & 151 & 2 & 8 & 17  \\ 
  $3.7$    & $-0.0250$  & $-0.0$    & $40^3\times96$  & 200  & 8260 & 1 & 48  & 295 & 2 & 8 & 33  \\ \hline
  $3.57$   & $-0.0380$  & $-0.007$  & $24^3\times64$  & 200  & 1190 & 1 & 8   & 42  & 2 & 8 & 4   \\ 
  $3.57$   & $-0.0440$  & $-0.007$  & $32^3\times64$  & 200  & 2820 & 1 & 20  & 100 & 2 & 8 & 11  \\ 
  $3.57$   & $-0.0483$  & $-0.007$  & $48^3\times64$  & 200  & 9520 & 1 & 67  & 340 & 2 & 8 & 38  \\ \hline
  $3.3$    & $-0.1200$  & $-0.057$  & $16^3\times64$  & 500  & 360  & 1 & 5   & 12  & 2 & 8 & 3   \\ 
  $3.3$    & $-0.1265$  & $-0.057$  & $24^3\times64$  & 500  & 1190 & 1 & 21  & 42  & 2 & 8 & 11  \\ \hline
  \end{tabular}
  \caption{Computer time requirements for measurements on the ensembles from Table \todo{ensembles ref}. The first row is based on the test runs we have made, while the following ones are based on the volume scaling of the problem.}
  \label{tab:ensembles}
  \end{table}



\section{Ensemble Details}
We generated ensembles with $N_f = 2+1$ quark flavors, with 6-stout dynamical smeared Wilson fermions and a tree-level Symanzik improved gluon action. Having several $a$ and $m_{\pi}$ at our disposal will permit a systematic study of $m_{\pi}$ dependence of doubly charmed exotics. Since the doubly charmed tetraquark of interest is close to $D^0D^0\pi^+$ threshold, it is sensitive to $m_{ud}$, thus, it is advantageous to have many ensembles. 
We are using the action and parameters already employed and tuned for Ref. \cite{Durr:2008zz}. 

\begin{table}[!h]
  \centering \footnotesize
  \begin{tabular}{|c|c|c|c|c|c|c|}
  \hline
  $\beta$  & $m_{ud}$   & $m_{s}$   & $L^3 \times T$  & $a$ [fm]   & $m_\pi$ [MeV]   & \# of traj. \\ \hline \hline
  $3.7$    & $-0.0200$  & $-0.0$    & $32^3\times96$  & $0.065$      & $420$         &  2000      \\ 
  $3.7$    & $-0.0220$  & $-0.0$    & $32^3\times96$  & $0.065$      & $380$         &  2000      \\ 
  $3.7$    & $-0.0250$  & $-0.0$    & $40^3\times96$  & $0.065$      & $300$         &  2000      \\ \hline
  $3.57$   & $-0.0380$  & $-0.007$  & $24^3\times64$  & $0.085$      & $420$         &  2000      \\ 
  $3.57$   & $-0.0440$  & $-0.007$  & $32^3\times64$  & $0.085$      & $300$         &  2000      \\ 
  $3.57$   & $-0.0483$  & $-0.007$  & $48^3\times64$  & $0.085$      & $200$         &  2000      \\ \hline
  $3.3$    & $-0.1200$  & $-0.057$  & $16^3\times64$  & $0.125$      & $400$         &  5000      \\ 
  $3.3$    & $-0.1233$  & $-0.057$  & $24^3\times64$  & $0.125$      & $330$         &  5000      \\ 
  $3.3$    & $-0.1265$  & $-0.057$  & $24^3\times64$  & $0.125$      & $280$         &  5000      \\ \hline
  \end{tabular}
  \caption{Physical parameters of the ensembles that we have available for this project. Bare parameters have been taken from~\cite{Durr:2008zz}.}
  \end{table}


